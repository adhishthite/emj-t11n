export type EmojiDictionary = {
  // key is lowercased word or phrase
  [key: string]: string;
};

// A small, expressive dictionary. Add more as desired.
export const EMOJI_DICTIONARY: EmojiDictionary = {
  // Phrases
  'good morning': 'ðŸŒžâœ¨',
  'good afternoon': 'ðŸŒ¤ï¸',
  'good evening': 'ðŸŒ‡',
  'good night': 'ðŸŒ™âœ¨',
  'i love you': 'â¤ï¸',
  'i love': 'â¤ï¸',
  'i like': 'ðŸ‘',
  'miss you': 'ðŸ¥ºðŸ’­',
  'see you': 'ðŸ‘‹',
  'see you soon': 'ðŸ‘‹â³',
  'thank you': 'ðŸ™',
  'thanks a lot': 'ðŸ™âœ¨',
  'you are welcome': 'ðŸ™Œ',
  'good job': 'ðŸ‘',
  'well done': 'ðŸ‘',
  'happy birthday': 'ðŸŽ‚ðŸŽ‰',
  'congratulations': 'ðŸŽ‰',
  'happy anniversary': 'ðŸ’žðŸŽ‰',
  'good luck': 'ðŸ€',
  'have fun': 'ðŸŽ‰',
  'take care': 'ðŸ¤—',
  'i am sorry': 'ðŸ™ðŸ˜ž',
  'no worries': 'ðŸ‘Œ',
  'excuse me': 'ðŸ™',
  'bless you': 'ðŸ¤§ðŸ™',
  'good morning sunshine': 'ðŸŒžâœ¨',
  'love you so much': 'â¤ï¸ðŸ¥°',
  'i am hungry': 'ðŸ¤¤',
  'i am thirsty': 'ðŸ¥¤',
  'on my way': 'ðŸƒâ€â™‚ï¸ðŸ’¨',
  'be right back': 'â†©ï¸',
  'see you later': 'ðŸ‘‹â°',
  'good to go': 'âœ…',
  'need coffee': 'â˜•ï¸',
  'time to sleep': 'ðŸ˜´',
  'time to eat': 'ðŸ½ï¸',
  'time to party': 'ðŸŽ‰',
  'letâ€™s party': 'ðŸŽ‰',
  'let us party': 'ðŸŽ‰',
  'cheers to you': 'ðŸ¥‚',
  'good vibes': 'âœ¨',
  'i am tired': 'ðŸ˜ª',
  'just kidding': 'ðŸ˜‰',
  'for real': 'ðŸ¤”âœ…',
  'no way': 'ðŸ™…â€â™‚ï¸',
  'hurry up': 'â©',
  'calm down': 'ðŸ§˜',
  'hold on': 'âœ‹',
  'call me': 'ðŸ“ž',
  'text me': 'ðŸ’¬',
  'letâ€™s go': 'ðŸ',
  'way to go': 'ðŸ‘',
  'i am home': 'ðŸ ',
  'at work': 'ðŸ’¼',
  'at the gym': 'ðŸ‹ï¸',
  'on vacation': 'ðŸ–ï¸',
  'road trip': 'ðŸš—ðŸ›£ï¸',
  'good game': 'ðŸŽ®ðŸ‘',

  // Common words: greetings
  hello: 'ðŸ‘‹',
  hi: 'ðŸ‘‹',
  hey: 'ðŸ‘‹',
  welcome: 'ðŸ™',
  bye: 'ðŸ‘‹',
  goodbye: 'ðŸ‘‹',
  cheers: 'ðŸ¥‚',

  // Acknowledgement / reactions
  love: 'â¤ï¸',
  like: 'ðŸ‘',
  liked: 'ðŸ‘',
  dislike: 'ðŸ‘Ž',
  yes: 'âœ…',
  yeah: 'âœ…',
  yup: 'âœ…',
  no: 'âŒ',
  nope: 'âŒ',
  ok: 'ðŸ‘Œ',
  okay: 'ðŸ‘Œ',
  cool: 'ðŸ˜Ž',
  nice: 'âœ¨',
  perfect: 'âœ…',
  correct: 'âœ…',
  wrong: 'âŒ',
  maybe: 'ðŸ¤”',
  wait: 'â³',
  soon: 'â³',
  later: 'â°',
  now: 'âš¡ï¸',

  // Emotions
  lol: 'ðŸ˜‚',
  lmao: 'ðŸ¤£',
  rofl: 'ðŸ¤£',
  haha: 'ðŸ˜„',
  happy: 'ðŸ˜Š',
  joy: 'ðŸ˜‚',
  sad: 'ðŸ˜¢',
  cry: 'ðŸ˜¢',
  crying: 'ðŸ˜­',
  hurt: 'ðŸ¤•',
  angry: 'ðŸ˜ ',
  mad: 'ðŸ˜ ',
  upset: 'ðŸ˜ž',
  shocked: 'ðŸ˜±',
  surprised: 'ðŸ˜²',
  wow: 'ðŸ¤©',
  excited: 'ðŸ¤©',
  bored: 'ðŸ¥±',
  tired: 'ðŸ˜ª',
  sleepy: 'ðŸ˜´',
  confused: 'ðŸ˜•',
  thinking: 'ðŸ¤”',
  nervous: 'ðŸ˜¬',
  coolness: 'ðŸ˜Ž',
  kiss: 'ðŸ˜˜',
  hug: 'ðŸ¤—',
  hope: 'ðŸ¤ž',
  lucky: 'ðŸ€',
  shockedface: 'ðŸ˜±',

  // Activities / verbs
  read: 'ðŸ“–',
  write: 'âœï¸',
  draw: 'âœï¸',
  paint: 'ðŸŽ¨',
  code: 'ðŸ’»',
  program: 'ðŸ’»',
  build: 'ðŸ—ï¸',
  cook: 'ðŸ³',
  eat: 'ðŸ½ï¸',
  drink: 'ðŸ¥¤',
  sleep: 'ðŸ˜´',
  run: 'ðŸƒâ€â™‚ï¸',
  walk: 'ðŸš¶',
  drive: 'ðŸš—',
  fly: 'âœˆï¸',
  swim: 'ðŸŠ',
  dance: 'ðŸ’ƒ',
  sing: 'ðŸŽ¤',
  play: 'ðŸŽ®',
  watch: 'ðŸ‘€',
  listen: 'ðŸŽ§',
  learn: 'ðŸ“š',
  study: 'ðŸ“š',
  travel: 'ðŸŒâœˆï¸',
  celebrate: 'ðŸŽ‰',
  party: 'ðŸŽ‰',
  meditate: 'ðŸ§˜',
  shop: 'ðŸ›ï¸',
  clean: 'ðŸ§¹',
  wash: 'ðŸ§¼',
  workout: 'ðŸ‹ï¸',
  exercise: 'ðŸƒâ€â™‚ï¸',
  relax: 'ðŸ˜Œ',
  think: 'ðŸ¤”',
  focus: 'ðŸŽ¯',
  help: 'ðŸ†˜',
  fix: 'ðŸ› ï¸',
  save: 'ðŸ’¾',
  send: 'ðŸ“¤',
  receive: 'ðŸ“¥',

  // Food & drink
  pizza: 'ðŸ•',
  burger: 'ðŸ”',
  fries: 'ðŸŸ',
  taco: 'ðŸŒ®',
  burrito: 'ðŸŒ¯',
  sushi: 'ðŸ£',
  ramen: 'ðŸœ',
  noodles: 'ðŸ',
  pasta: 'ðŸ',
  salad: 'ðŸ¥—',
  steak: 'ðŸ¥©',
  chicken: 'ðŸ—',
  fish: 'ðŸŸ',
  egg: 'ðŸ¥š',
  eggs: 'ðŸ¥š',
  cheese: 'ðŸ§€',
  bread: 'ðŸž',
  cake: 'ðŸ°',
  cupcake: 'ðŸ§',
  cookie: 'ðŸª',
  chocolate: 'ðŸ«',
  icecream: 'ðŸ¨',
  ice: 'ðŸ§Š',
  candy: 'ðŸ¬',
  apple: 'ðŸŽ',
  banana: 'ðŸŒ',
  orange: 'ðŸŠ',
  mango: 'ðŸ¥­',
  grape: 'ðŸ‡',
  watermelon: 'ðŸ‰',
  strawberry: 'ðŸ“',
  lemon: 'ðŸ‹',
  peach: 'ðŸ‘',
  avocado: 'ðŸ¥‘',
  corn: 'ðŸŒ½',
  carrot: 'ðŸ¥•',
  potato: 'ðŸ¥”',
  tomato: 'ðŸ…',
  pepper: 'ðŸŒ¶ï¸',
  mushroom: 'ðŸ„',
  coffee: 'â˜•ï¸',
  tea: 'ðŸµ',
  boba: 'ðŸ§‹',
  milk: 'ðŸ¥›',
  juice: 'ðŸ§ƒ',
  water: 'ðŸ’§',
  beer: 'ðŸº',
  wine: 'ðŸ·',
  cocktail: 'ðŸ¹',

  // Weather & nature
  sun: 'â˜€ï¸',
  sunny: 'â˜€ï¸',
  moon: 'ðŸŒ™',
  star: 'â­ï¸',
  rainbow: 'ðŸŒˆ',
  cloud: 'â˜ï¸',
  rain: 'ðŸŒ§ï¸',
  thunder: 'â›ˆï¸',
  lightning: 'âš¡ï¸',
  storm: 'ðŸŒ©ï¸',
  snow: 'â„ï¸',
  windy: 'ðŸ’¨',
  wind: 'ðŸ’¨',
  fog: 'ðŸŒ«ï¸',
  fire: 'ðŸ”¥',
  lit: 'ðŸ”¥',
  tree: 'ðŸŒ³',
  flower: 'ðŸŒ¸',
  rose: 'ðŸŒ¹',
  tulip: 'ðŸŒ·',
  blossom: 'ðŸŒ¼',
  leaf: 'ðŸƒ',
  ocean: 'ðŸŒŠ',
  wave: 'ðŸŒŠ',
  mountain: 'â›°ï¸',
  volcano: 'ðŸŒ‹',
  desert: 'ðŸœï¸',

  // Animals
  cat: 'ðŸ±',
  kitten: 'ðŸ±',
  dog: 'ðŸ¶',
  puppy: 'ðŸ¶',
  mouse: 'ðŸ­',
  rabbit: 'ðŸ°',
  panda: 'ðŸ¼',
  bear: 'ðŸ»',
  koala: 'ðŸ¨',
  tiger: 'ðŸ¯',
  lion: 'ðŸ¦',
  monkey: 'ðŸµ',
  pig: 'ðŸ·',
  chickenanimal: 'ðŸ”',
  cow: 'ðŸ®',
  horse: 'ðŸ´',
  sheep: 'ðŸ‘',
  frog: 'ðŸ¸',
  bird: 'ðŸ¦',
  penguin: 'ðŸ§',
  duck: 'ðŸ¦†',
  eagle: 'ðŸ¦…',
  owl: 'ðŸ¦‰',
  fishanimal: 'ðŸŸ',
  whale: 'ðŸ³',
  dolphin: 'ðŸ¬',
  shark: 'ðŸ¦ˆ',
  octopus: 'ðŸ™',
  crab: 'ðŸ¦€',
  butterfly: 'ðŸ¦‹',
  bee: 'ðŸ',
  bug: 'ðŸž',
  snail: 'ðŸŒ',

  // Travel & places
  car: 'ðŸš—',
  taxi: 'ðŸš•',
  bus: 'ðŸšŒ',
  train: 'ðŸš†',
  subway: 'ðŸš‡',
  tram: 'ðŸšŠ',
  airplane: 'âœˆï¸',
  flight: 'âœˆï¸',
  ship: 'ðŸš¢',
  boat: 'â›µï¸',
  bicycle: 'ðŸš²',
  scooter: 'ðŸ›µ',
  rocket: 'ðŸš€',
  hotel: 'ðŸ¨',
  house: 'ðŸ ',
  home: 'ðŸ ',
  office: 'ðŸ¢',
  school: 'ðŸ«',
  hospital: 'ðŸ¥',
  bank: 'ðŸ¦',
  park: 'ðŸžï¸',
  beach: 'ðŸ–ï¸',
  island: 'ðŸï¸',
  stadium: 'ðŸŸï¸',
  store: 'ðŸ¬',
  shopplace: 'ðŸ¬',

  // Tech & work
  phone: 'ðŸ“±',
  call: 'ðŸ“ž',
  message: 'ðŸ’¬',
  email: 'âœ‰ï¸',
  inbox: 'ðŸ“¥',
  outbox: 'ðŸ“¤',
  laptop: 'ðŸ’»',
  computer: 'ðŸ’»',
  keyboard: 'âŒ¨ï¸',
  mousepad: 'ðŸ–±ï¸',
  battery: 'ðŸ”‹',
  camera: 'ðŸ“·',
  video: 'ðŸŽ¬',
  picture: 'ðŸ–¼ï¸',
  tv: 'ðŸ“º',
  radio: 'ðŸ“»',
  wifi: 'ðŸ“¶',
  internet: 'ðŸŒ',
  link: 'ðŸ”—',
  lock: 'ðŸ”’',
  unlock: 'ðŸ”“',
  bugfix: 'ðŸª²',
  idea: 'ðŸ’¡',
  note: 'ðŸ“',
  calendar: 'ðŸ“…',
  clock: 'ðŸ•’',
  time: 'â°',
  alarm: 'â°',
  map: 'ðŸ—ºï¸',
  location: 'ðŸ“',
  pin: 'ðŸ“',
  search: 'ðŸ”Ž',
  settings: 'âš™ï¸',
  tool: 'ðŸ› ï¸',
  hammer: 'ðŸ”¨',
  wrench: 'ðŸ”§',

  // Sports & games
  soccer: 'âš½ï¸',
  football: 'ðŸˆ',
  basketball: 'ðŸ€',
  baseball: 'âš¾ï¸',
  tennis: 'ðŸŽ¾',
  golf: 'â›³ï¸',
  boxing: 'ðŸ¥Š',
  running: 'ðŸƒâ€â™‚ï¸',
  hiking: 'ðŸ¥¾',
  skiing: 'ðŸŽ¿',
  snowboard: 'ðŸ‚',
  yoga: 'ðŸ§˜',
  game: 'ðŸŽ®',
  dice: 'ðŸŽ²',
  trophy: 'ðŸ†',

  // Celebrations & symbols
  gift: 'ðŸŽ',
  present: 'ðŸŽ',
  partyhat: 'ðŸ¥³',
  fireworks: 'ðŸŽ†',
  sparkles: 'âœ¨',
  starstruck: 'ðŸ¤©',
  heart: 'â¤ï¸',
  hearts: 'ðŸ’ž',
  brokenheart: 'ðŸ’”',
  flame: 'ðŸ”¥',
  snowflake: 'â„ï¸',
  umbrella: 'â˜‚ï¸',
  recycle: 'â™»ï¸',
  warning: 'âš ï¸',
  stop: 'ðŸ›‘',
  check: 'âœ…',
  cross: 'âŒ',
  plus: 'âž•',
  minus: 'âž–',
  up: 'â¬†ï¸',
  down: 'â¬‡ï¸',
  left: 'â¬…ï¸',
  right: 'âž¡ï¸',

  // Time of day
  morning: 'ðŸŒ…',
  noon: 'ðŸ™ï¸',
  evening: 'ðŸŒ‡',
  night: 'ðŸŒƒ',

  // Misc useful words
  work: 'ðŸ’¼',
  money: 'ðŸ’°',
  banknote: 'ðŸ’µ',
  sale: 'ðŸ·ï¸',
  giftcard: 'ðŸŽŸï¸',
  book: 'ðŸ“•',
  paper: 'ðŸ“„',
  package: 'ðŸ“¦',
  shopping: 'ðŸ›ï¸',
  cart: 'ðŸ›’',
  ticket: 'ðŸŽ«',
  art: 'ðŸŽ¨',
  music: 'ðŸŽµ',
  song: 'ðŸŽµ',
  guitar: 'ðŸŽ¸',
  piano: 'ðŸŽ¹',
  movie: 'ðŸŽ¬',
  sleepyn: 'ðŸ˜´',
  prayer: 'ðŸ™',
  thanks: 'ðŸ™',
  please: 'ðŸ™',
};

function escapeRegExp(str: string) {
  return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function sortKeysByWordLengthDesc(keys: string[]) {
  return [...keys].sort((a, b) => {
    const wa = a.trim().split(/\s+/).length;
    const wb = b.trim().split(/\s+/).length;
    if (wa !== wb) return wb - wa;
    return b.length - a.length;
  });
}

// Translate text: replace phrases first, then individual words.
export function translateToEmojis(input: string, dict: EmojiDictionary = EMOJI_DICTIONARY) {
  if (!input.trim()) return '';

  // 1) Replace multi-word phrases with their emoji equivalents.
  const phraseKeys = sortKeysByWordLengthDesc(
    Object.keys(dict).filter((k) => k.includes(' '))
  );

  let result = input;
  for (const key of phraseKeys) {
    const emoji = dict[key];
    const pattern = new RegExp(`\\b${escapeRegExp(key)}\\b`, 'gi');
    result = result.replace(pattern, emoji);
  }

  // 2) Replace single words while preserving punctuation.
  const tokens = result.split(/(\s+)/); // keep spaces

  const mapped = tokens.map((token) => {
    // Skip if token already contains emoji characters
    if (/\p{Extended_Pictographic}/u.test(token)) return token;

    // Extract leading/trailing punctuation around a central word
    const m = token.match(/^([^\p{L}\p{N}]*)((?:[\p{L}\p{N}][\p{L}\p{N}\-']*)?)([^\p{L}\p{N}]*)$/u);
    if (!m) return token; // space or non-word token
    const [, lead, core, tail] = m;
    if (!core) return token;

    const lower = core.toLowerCase();
    const emoji = dict[lower];
    return emoji ? `${lead}${emoji}${tail}` : token;
  });

  // 3) Collapse multiple adjacent emojis/spaces nicely
  const joined = mapped.join('');
  return joined.replace(/\s{2,}/g, ' ').trim();
}

export type HistoryItem = {
  id: string;
  input: string;
  output: string;
  timestamp: number;
};
